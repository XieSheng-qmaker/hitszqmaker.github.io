<!DOCTYPE html>
<html style="overflow-x:hidden">
  <head>
    <meta charset = "utf-8">
    <title>南工骁鹰|2019规则评测</title>
    <meta http-equiv = "X-UA-Compatible" content = "IE=Edge">
    <meta name = "viewport" content = "width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit">
    <meta name = "author" content = "Big_Uncle">
    <link rel = "icon" href = "../../../robomaster.jpg">
    <link rel = "stylesheet" href = "../../../css/bootstrap.min.css">
    <link rel = "stylesheet" href = "../../../css/robomaster.css">
  </head>
  <body style="font-family:'微软雅黑';font-size:20px">
    <div class="container">
      <div class="jumbotron">
				<h1><center>RM2019战队内部规则评测</center></h1>
        <small>本试题是从海量题库中随机抽取的50道题目，每道题均为单选题，每题两分，满分一百分，点击提交后可以查看分数，但并不会给出具体错误选项。要求各位最后得分在80分以上。</small>
			</div>
      <div class="form-group">
        <label for="exampleInputEmail1">你的姓名：</label>
        <input type="email" class="form-control" id="name" placeholder="姓名">
      </div><hr>
      <text>请完成下列选项：</text>
      <div  id="testContent">
      </div>
      <center><button type="submit" class="btn btn-primary" onclick="check()">提交</button></center><hr>
      <div style="font-size:15px"><center>感谢各位学校提供的满分评测试题！</center></div>
    </div>
  </body>
  <script src="../../../js/jquery.min.js"></script>
	<script src="../../../js/bootstrap.min.js"></script>
  <script src="../../../js/count.js"></script>
  <script>
  var score = 0;
    $(function(){
      var count = 137;
       //原始数组
       var original = new Array; 
       //给原始数组original赋值
       for (var i = 0; i < count; i++) {
           original[i] = i + 1;
       }
       //排序
       original.sort(function() {
           return 0.5 - Math.random();
       });
       
      var url = "test.txt";	
      var htmlobj= $.ajax({url:url,async:false});
      var dataString = htmlobj.responseText;
      var data = eval("("+ dataString +")");
      data = data["content"];
      //console.log(data.length);
      var testContent = document.getElementById("testContent").innerHTML;
      for(var i = 0; i < 50; i++)
      {
        var id = original[i];
        testContent += ("<text style='font-weight:bold'>"+(i+1)+"、"+data[id-1]["title"]+"</text>");
        for(var j = 1; j <= 4; j++){
          testContent += ('<div class="radio"><label><input type="radio" name="optionsRadios'+i+'" answer="'+data[id-1]["asw"]+'" id="optionsRadios1" value="'+j+'">'+data[id-1][j]+'</label></div>');
        }
      }
      document.getElementById("testContent").innerHTML = testContent;
    });
    
    function check()
    {
      var name = document.getElementById("name").value;
      if(name == "")
      {
        alert("未填写姓名！");
        score = 0;
        return;
      }else if(score == 0){
        var radios = $("[type = 'radio']");
        for(var i = 0; i< radios.length; i++){
          if(radios[i].checked){
            if(radios[i].getAttribute("answer") == radios[i].value)
            {
              score += 2;
            }
          }
        }
      }
      if(score >= 80)
      {
        var myDate = new Date();
        var date = (myDate.getMonth()+1)+"-"+myDate.getDate()+"-"+myDate.getHours()+"-"+myDate.getMinutes();
        window.location.href = ("http://qmaker.applinzi.com/RmTest.php?name="+name+"&score="+score+"&time="+date);
      }else{
        window.location = ("result.html?result="+score);
      }
    }
  </script>
</html>